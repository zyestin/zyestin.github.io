<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>用脚手架 制作一个RN库 放npm - zyestin</title><meta name="Description" content="Hugo theme - LoveIt"><meta property="og:title" content="用脚手架 制作一个RN库 放npm" />
<meta property="og:description" content="脚手架 create-react-native-module
脚手架使用（顺利） 工具安装 1 2 npm install -g yarn npm install -g create-react-native-module 脚手架命令 1 create-react-native-module RemoteFont --object-class-name react-native-remote-font --object-class-name RemoteFontLoader --native-package-id com.yestin.font --platforms ios,android --github-account zyestin --author-name yestin --author-email zyestin@gmail.com --generate-example --example-react-native-template react-native@0.62 过程中发现，若不指定--example-react-native-template react-native@0.62，发现总有这样的报错日志
1 2 3 4 5 6 7 8 9 10 11 pod --version failure, aborting with broken example app Error while creating library module react-native-remote-font Error: Command failed with ENOENT: pod --version spawnSync pod ENOENT at Object." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zyestin.github.io/zyestin/create-npm-lib/" /><meta property="og:image" content="https://zyestin.github.io/logo.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-01T12:00:11+08:00" />
<meta property="article:modified_time" content="2023-12-15T15:48:46+08:00" /><meta property="og:site_name" content="LoveIt-zyestin" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://zyestin.github.io/logo.png" /><meta name="twitter:title" content="用脚手架 制作一个RN库 放npm"/>
<meta name="twitter:description" content="脚手架 create-react-native-module
脚手架使用（顺利） 工具安装 1 2 npm install -g yarn npm install -g create-react-native-module 脚手架命令 1 create-react-native-module RemoteFont --object-class-name react-native-remote-font --object-class-name RemoteFontLoader --native-package-id com.yestin.font --platforms ios,android --github-account zyestin --author-name yestin --author-email zyestin@gmail.com --generate-example --example-react-native-template react-native@0.62 过程中发现，若不指定--example-react-native-template react-native@0.62，发现总有这样的报错日志
1 2 3 4 5 6 7 8 9 10 11 pod --version failure, aborting with broken example app Error while creating library module react-native-remote-font Error: Command failed with ENOENT: pod --version spawnSync pod ENOENT at Object."/>
<meta name="twitter:site" content="@YestinZz"/>
<meta name="application-name" content="LoveIt-zyestin">
<meta name="apple-mobile-web-app-title" content="LoveIt-zyestin"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="https://avatars.githubusercontent.com/u/51897571?s=40&amp;v=4"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://zyestin.github.io/zyestin/create-npm-lib/" /><link rel="prev" href="https://zyestin.github.io/zyestin/art-text/" /><link rel="next" href="https://zyestin.github.io/zyestin/waterfall-list-horizontal/" /><link rel="stylesheet" href="/zyestin/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "用脚手架 制作一个RN库 放npm",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/zyestin.github.io\/zyestin\/create-npm-lib\/"
        },"image": ["https:\/\/avatars.githubusercontent.com\/u\/51897571?s=40\u0026v=4"],"genre": "posts","keywords": "react-native","wordcount":  1555 ,
        "url": "https:\/\/zyestin.github.io\/zyestin\/create-npm-lib\/","datePublished": "2023-11-01T12:00:11+08:00","dateModified": "2023-12-15T15:48:46+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "zyestin","logo": "https:\/\/avatars.githubusercontent.com\/u\/51897571?s=40\u0026v=4"},"author": {
                "@type": "Person",
                "name": "zyestin"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/zyestin/" title="zyestin"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw' aria-hidden='true'></i></span>LoveIt</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/zyestin/posts/"> Posts </a><a class="menu-item" href="/zyestin/tags/"> Tags </a><a class="menu-item" href="/zyestin/categories/"> Categories </a><a class="menu-item" href="/zyestin/categories/documentation/"> Docs </a><a class="menu-item" href="/zyestin/about/"> About </a><a class="menu-item" href="https://github.com/dillonzq/LoveIt" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="Select Language">
                    <i class="fa fa-globe" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/zyestin/create-npm-lib/" selected>English</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/zyestin/" title="zyestin"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw' aria-hidden='true'></i></span>LoveIt</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/zyestin/posts/" title="">Posts</a><a class="menu-item" href="/zyestin/tags/" title="">Tags</a><a class="menu-item" href="/zyestin/categories/" title="">Categories</a><a class="menu-item" href="/zyestin/categories/documentation/" title="">Docs</a><a class="menu-item" href="/zyestin/about/" title="">About</a><a class="menu-item" href="https://github.com/dillonzq/LoveIt" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Select Language">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/zyestin/create-npm-lib/" selected>English</option></select>
                </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">用脚手架 制作一个RN库 放npm</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://github.com/zyestin" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>zyestin</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2023-11-01">2023-11-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1555 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;8 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#脚手架使用顺利">脚手架使用（<strong>顺利</strong>）</a></li>
    <li><a href="#运行ios较顺利">运行iOS（<strong>较顺利</strong>）</a></li>
    <li><a href="#将自定义三方库代码写入有坑">将自定义三方库代码写入（<strong>有坑</strong>）</a>
      <ul>
        <li><a href="#输入-本库代码">输入 本库代码</a></li>
        <li><a href="#添加-其它依赖库挺坑">添加 其它依赖库（<strong>挺坑</strong>）</a></li>
      </ul>
    </li>
    <li><a href="#写demo测试">写Demo测试</a></li>
    <li><a href="#运行-android挺坑">运行 Android（<strong>挺坑</strong>）</a>
      <ul>
        <li><a href="#1-failed-to-transform-react-native-0710-rc0-debugaar">(1) <code>Failed to transform react-native-0.71.0-rc.0-debug.aar</code></a></li>
        <li><a href="#2-也遇到-link问题">(2) 也遇到 Link问题</a></li>
      </ul>
    </li>
    <li><a href="#发布">发布</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>脚手架 <a href="https://github.com/brodybits/create-react-native-module?tab=readme-ov-file" target="_blank" rel="noopener noreffer ">create-react-native-module</a></p>
<h2 id="脚手架使用顺利">脚手架使用（<strong>顺利</strong>）</h2>
<ul>
<li>工具安装</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">npm install -g yarn
</span></span><span class="line"><span class="cl">npm install -g create-react-native-module
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>脚手架命令</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">create-react-native-module RemoteFont --object-class-name react-native-remote-font --object-class-name RemoteFontLoader --native-package-id com.yestin.font --platforms ios,android --github-account zyestin --author-name yestin --author-email zyestin@gmail.com --generate-example --example-react-native-template react-native@0.62
</span></span></code></pre></td></tr></table>
</div>
</div><p>过程中发现，若不指定<code>--example-react-native-template react-native@0.62</code>，发现总有这样的报错日志</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">pod</span> <span class="o">--</span><span class="n">version</span> <span class="n">failure</span><span class="p">,</span> <span class="n">aborting</span> <span class="n">with</span> <span class="n">broken</span> <span class="n">example</span> <span class="n">app</span>
</span></span><span class="line"><span class="cl"><span class="n">Error</span> <span class="k">while</span> <span class="n">creating</span> <span class="n">library</span> <span class="n">module</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span>
</span></span><span class="line"><span class="cl"><span class="n">Error</span><span class="p">:</span> <span class="n">Command</span> <span class="n">failed</span> <span class="n">with</span> <span class="n">ENOENT</span><span class="p">:</span> <span class="n">pod</span> <span class="o">--</span><span class="n">version</span>
</span></span><span class="line"><span class="cl"><span class="n">spawnSync</span> <span class="n">pod</span> <span class="n">ENOENT</span>
</span></span><span class="line"><span class="cl">    <span class="n">at</span> <span class="ne">Object</span><span class="o">.</span><span class="n">spawnSync</span> <span class="p">(</span><span class="n">internal</span><span class="o">/</span><span class="n">child_process</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">1077</span><span class="p">:</span><span class="mi">20</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">at</span> <span class="ne">Object</span><span class="o">.</span><span class="n">spawnSync</span> <span class="p">(</span><span class="n">child_process</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">776</span><span class="p">:</span><span class="mi">24</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">at</span> <span class="n">Function</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">exports</span><span class="o">.</span><span class="n">sync</span> <span class="p">(</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">node_modules</span><span class="o">/</span><span class="n">create</span><span class="o">-</span><span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">module</span><span class="o">/</span><span class="n">node_modules</span><span class="o">/</span><span class="n">execa</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">174</span><span class="p">:</span><span class="mi">25</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">at</span> <span class="n">module</span><span class="o">.</span><span class="n">exports</span><span class="o">.</span><span class="n">commandSync</span> <span class="p">(</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">node_modules</span><span class="o">/</span><span class="n">create</span><span class="o">-</span><span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">module</span><span class="o">/</span><span class="n">node_modules</span><span class="o">/</span><span class="n">execa</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">235</span><span class="p">:</span><span class="mi">15</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">at</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">node_modules</span><span class="o">/</span><span class="n">create</span><span class="o">-</span><span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">module</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">lib</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">265</span><span class="p">:</span><span class="mi">17</span>
</span></span><span class="line"><span class="cl">    <span class="n">at</span> <span class="n">new</span> <span class="n">Promise</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">anonymous</span><span class="o">&gt;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">at</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">node_modules</span><span class="o">/</span><span class="n">create</span><span class="o">-</span><span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">module</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">lib</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">223</span><span class="p">:</span><span class="mi">18</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>成功的日志</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">CREATE</span> <span class="n">new</span> <span class="n">React</span> <span class="n">Native</span> <span class="n">module</span> <span class="n">with</span> <span class="n">the</span> <span class="n">following</span> <span class="n">options</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                        <span class="n">name</span><span class="p">:</span> <span class="n">RemoteFont</span>
</span></span><span class="line"><span class="cl">           <span class="n">full</span> <span class="n">package</span> <span class="n">name</span><span class="p">:</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span>
</span></span><span class="line"><span class="cl">                     <span class="n">is</span> <span class="n">view</span><span class="p">:</span> <span class="bp">false</span>
</span></span><span class="line"><span class="cl">           <span class="n">object</span> <span class="k">class</span> <span class="n">name</span><span class="p">:</span> <span class="n">RemoteFontLoader</span>
</span></span><span class="line"><span class="cl">     <span class="n">Android</span> <span class="n">nativePackageId</span><span class="p">:</span> <span class="n">com</span><span class="o">.</span><span class="n">yestin</span><span class="o">.</span><span class="n">font</span>
</span></span><span class="line"><span class="cl">                   <span class="n">platforms</span><span class="p">:</span> <span class="n">ios</span><span class="p">,</span><span class="n">android</span>
</span></span><span class="line"><span class="cl">           <span class="n">Apple</span> <span class="n">tvosEnabled</span><span class="p">:</span> <span class="bp">false</span>
</span></span><span class="line"><span class="cl">                  <span class="n">authorName</span><span class="p">:</span> <span class="n">yestin</span>
</span></span><span class="line"><span class="cl">                 <span class="n">authorEmail</span><span class="p">:</span> <span class="n">zyestin</span><span class="err">@</span><span class="n">gmail</span><span class="o">.</span><span class="n">com</span>
</span></span><span class="line"><span class="cl">        <span class="n">author</span> <span class="n">githubAccount</span><span class="p">:</span> <span class="n">zyestin</span>
</span></span><span class="line"><span class="cl">                     <span class="n">license</span><span class="p">:</span> <span class="n">MIT</span>
</span></span><span class="line"><span class="cl">          <span class="n">useAppleNetworking</span><span class="p">:</span> <span class="bp">false</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">             <span class="n">generateExample</span><span class="p">:</span> <span class="bp">true</span>
</span></span><span class="line"><span class="cl">          <span class="n">exampleFileLinkage</span><span class="p">:</span> <span class="bp">false</span>
</span></span><span class="line"><span class="cl">                 <span class="n">exampleName</span><span class="p">:</span> <span class="n">example</span>
</span></span><span class="line"><span class="cl">  <span class="n">exampleReactNativeTemplate</span><span class="p">:</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="err">@</span><span class="mf">0.62</span>
</span></span><span class="line"><span class="cl">         <span class="n">writeExamplePodfile</span><span class="p">:</span> <span class="bp">false</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">CREATE</span><span class="p">:</span> <span class="n">Check</span> <span class="k">for</span> <span class="n">valid</span> <span class="n">Yarn</span> <span class="n">CLI</span> <span class="k">tool</span> <span class="n">version</span><span class="p">,</span> <span class="n">as</span> <span class="n">needed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">the</span> <span class="n">example</span> <span class="n">project</span>
</span></span><span class="line"><span class="cl"><span class="mf">1.22</span><span class="o">.</span><span class="mi">21</span>
</span></span><span class="line"><span class="cl"><span class="n">yarn</span> <span class="o">--</span><span class="n">version</span> <span class="n">ok</span>
</span></span><span class="line"><span class="cl"><span class="n">CREATE</span><span class="p">:</span> <span class="n">Generating</span> <span class="n">the</span> <span class="n">React</span> <span class="n">Native</span> <span class="n">library</span> <span class="n">module</span>
</span></span><span class="line"><span class="cl"><span class="n">CREATE</span> <span class="n">example</span> <span class="n">app</span> <span class="n">with</span> <span class="n">the</span> <span class="n">following</span> <span class="n">template</span><span class="p">:</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="err">@</span><span class="mf">0.62</span>
</span></span><span class="line"><span class="cl">                                                          
</span></span><span class="line"><span class="cl">               <span class="c1">######                ######               </span>
</span></span><span class="line"><span class="cl">             <span class="c1">###     ####        ####     ###             </span>
</span></span><span class="line"><span class="cl">            <span class="c1">##          ###    ###          ##            </span>
</span></span><span class="line"><span class="cl">            <span class="c1">##             ####             ##            </span>
</span></span><span class="line"><span class="cl">            <span class="c1">##             ####             ##            </span>
</span></span><span class="line"><span class="cl">            <span class="c1">##           ##    ##           ##            </span>
</span></span><span class="line"><span class="cl">            <span class="c1">##         ###      ###         ##            </span>
</span></span><span class="line"><span class="cl">             <span class="c1">##  ########################  ##             </span>
</span></span><span class="line"><span class="cl">          <span class="c1">######    ###            ###    ######          </span>
</span></span><span class="line"><span class="cl">      <span class="c1">###     ##    ##              ##    ##     ###      </span>
</span></span><span class="line"><span class="cl">   <span class="c1">###         ## ###      ####      ### ##         ###   </span>
</span></span><span class="line"><span class="cl">  <span class="c1">##           ####      ########      ####           ##  </span>
</span></span><span class="line"><span class="cl"> <span class="c1">##             ###     ##########     ###             ## </span>
</span></span><span class="line"><span class="cl">  <span class="c1">##           ####      ########      ####           ##  </span>
</span></span><span class="line"><span class="cl">   <span class="c1">###         ## ###      ####      ### ##         ###   </span>
</span></span><span class="line"><span class="cl">      <span class="c1">###     ##    ##              ##    ##     ###      </span>
</span></span><span class="line"><span class="cl">          <span class="c1">######    ###            ###    ######          </span>
</span></span><span class="line"><span class="cl">             <span class="c1">##  ########################  ##             </span>
</span></span><span class="line"><span class="cl">            <span class="c1">##         ###      ###         ##            </span>
</span></span><span class="line"><span class="cl">            <span class="c1">##           ##    ##           ##            </span>
</span></span><span class="line"><span class="cl">            <span class="c1">##             ####             ##            </span>
</span></span><span class="line"><span class="cl">            <span class="c1">##             ####             ##            </span>
</span></span><span class="line"><span class="cl">            <span class="c1">##          ###    ###          ##            </span>
</span></span><span class="line"><span class="cl">             <span class="c1">###     ####        ####     ###             </span>
</span></span><span class="line"><span class="cl">               <span class="c1">######                ######               </span>
</span></span><span class="line"><span class="cl">                                                          
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                  <span class="n">Welcome</span> <span class="n">to</span> <span class="n">React</span> <span class="n">Native</span><span class="o">!</span>                
</span></span><span class="line"><span class="cl">                 <span class="n">Learn</span> <span class="n">once</span><span class="p">,</span> <span class="n">write</span> <span class="n">anywhere</span>               
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">✔</span> <span class="n">Downloading</span> <span class="n">template</span>
</span></span><span class="line"><span class="cl"><span class="err">✔</span> <span class="n">Copying</span> <span class="n">template</span>
</span></span><span class="line"><span class="cl"><span class="err">✔</span> <span class="n">Processing</span> <span class="n">template</span>
</span></span><span class="line"><span class="cl"><span class="err">✔</span> <span class="n">Installing</span> <span class="n">CocoaPods</span> <span class="n">dependencies</span> <span class="p">(</span><span class="n">this</span> <span class="n">may</span> <span class="n">take</span> <span class="n">a</span> <span class="n">few</span> <span class="n">minutes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="n">Run</span> <span class="n">instructions</span> <span class="k">for</span> <span class="n">Android</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="err">•</span> <span class="n">Have</span> <span class="n">an</span> <span class="n">Android</span> <span class="n">emulator</span> <span class="n">running</span> <span class="p">(</span><span class="n">quickest</span> <span class="n">way</span> <span class="n">to</span> <span class="n">get</span> <span class="n">started</span><span class="p">),</span> <span class="ow">or</span> <span class="n">a</span> <span class="n">device</span> <span class="n">connected</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="err">•</span> <span class="n">cd</span> <span class="s2">&#34;/Users/yestin/Desktop/code_test/react-native/react-native-remote-font/example&#34;</span> <span class="o">&amp;&amp;</span> <span class="n">npx</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span> <span class="n">run</span><span class="o">-</span><span class="n">android</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="n">Run</span> <span class="n">instructions</span> <span class="k">for</span> <span class="n">iOS</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="err">•</span> <span class="n">cd</span> <span class="s2">&#34;/Users/yestin/Desktop/code_test/react-native/react-native-remote-font/example&#34;</span> <span class="o">&amp;&amp;</span> <span class="n">npx</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span> <span class="n">run</span><span class="o">-</span><span class="n">ios</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span> <span class="ow">or</span> <span class="o">-</span>
</span></span><span class="line"><span class="cl">    <span class="err">•</span> <span class="n">Open</span> <span class="n">example</span><span class="o">/</span><span class="n">ios</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">xcworkspace</span> <span class="ow">in</span> <span class="n">Xcode</span> <span class="ow">or</span> <span class="n">run</span> <span class="s2">&#34;xed -b ios&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="err">•</span> <span class="n">Hit</span> <span class="n">the</span> <span class="n">Run</span> <span class="n">button</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">  <span class="n">Run</span> <span class="n">instructions</span> <span class="k">for</span> <span class="n">macOS</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="err">•</span> <span class="n">See</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">aka</span><span class="o">.</span><span class="n">ms</span><span class="o">/</span><span class="n">ReactNativeGuideMacOS</span> <span class="k">for</span> <span class="n">the</span> <span class="n">latest</span> <span class="n">up</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">date</span> <span class="n">instructions</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"><span class="n">Linking</span> <span class="n">the</span> <span class="n">new</span> <span class="n">module</span> <span class="n">library</span> <span class="n">to</span> <span class="n">the</span> <span class="n">example</span> <span class="n">app</span>
</span></span><span class="line"><span class="cl"><span class="n">yarn</span> <span class="n">add</span> <span class="n">v1</span><span class="o">.</span><span class="mf">22.21</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">4</span><span class="p">]</span> <span class="err">🔍</span>  <span class="n">Resolving</span> <span class="n">packages</span><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">2</span><span class="o">/</span><span class="mi">4</span><span class="p">]</span> <span class="err">🚚</span>  <span class="n">Fetching</span> <span class="n">packages</span><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">]</span> <span class="err">🔗</span>  <span class="n">Linking</span> <span class="n">dependencies</span><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="n">warning</span> <span class="s2">&#34;@react-native-community/eslint-config &gt; @typescript-eslint/eslint-plugin@1.13.0&#34;</span> <span class="n">has</span> <span class="n">incorrect</span> <span class="n">peer</span> <span class="n">dependency</span> <span class="s2">&#34;eslint@^5.0.0&#34;</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="n">warning</span> <span class="s2">&#34;@react-native-community/eslint-config &gt; @typescript-eslint/parser@1.13.0&#34;</span> <span class="n">has</span> <span class="n">incorrect</span> <span class="n">peer</span> <span class="n">dependency</span> <span class="s2">&#34;eslint@^5.0.0&#34;</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="n">warning</span> <span class="s2">&#34;@react-native-community/eslint-config &gt; eslint-plugin-react@7.12.4&#34;</span> <span class="n">has</span> <span class="n">incorrect</span> <span class="n">peer</span> <span class="n">dependency</span> <span class="s2">&#34;eslint@^3.0.0 || ^4.0.0 || ^5.0.0&#34;</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="n">warning</span> <span class="s2">&#34;@react-native-community/eslint-config &gt; eslint-plugin-react-native@3.6.0&#34;</span> <span class="n">has</span> <span class="n">incorrect</span> <span class="n">peer</span> <span class="n">dependency</span> <span class="s2">&#34;eslint@^3.17.0 || ^4 || ^5&#34;</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="n">warning</span> <span class="s2">&#34;@react-native-community/eslint-config &gt; @typescript-eslint/eslint-plugin &gt; tsutils@3.21.0&#34;</span> <span class="n">has</span> <span class="n">unmet</span> <span class="n">peer</span> <span class="n">dependency</span> <span class="s2">&#34;typescript@&gt;=2.8.0 || &gt;= 3.2.0-dev || &gt;= 3.3.0-dev || &gt;= 3.4.0-dev || &gt;= 3.5.0-dev || &gt;= 3.6.0-dev || &gt;= 3.6.0-beta || &gt;= 3.7.0-dev || &gt;= 3.7.0-beta&#34;</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">4</span><span class="o">/</span><span class="mi">4</span><span class="p">]</span> <span class="err">🔨</span>  <span class="n">Building</span> <span class="n">fresh</span> <span class="n">packages</span><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="n">success</span> <span class="n">Saved</span> <span class="n">lockfile</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="n">success</span> <span class="n">Saved</span> <span class="mi">1</span> <span class="n">new</span> <span class="n">dependency</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="n">info</span> <span class="n">Direct</span> <span class="n">dependencies</span>
</span></span><span class="line"><span class="cl"><span class="err">└─</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span><span class="err">@</span><span class="mf">0.0</span><span class="o">.</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">info</span> <span class="n">All</span> <span class="n">dependencies</span>
</span></span><span class="line"><span class="cl"><span class="err">└─</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span><span class="err">@</span><span class="mf">0.0</span><span class="o">.</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="err">✨</span>  <span class="n">Done</span> <span class="ow">in</span> <span class="mf">2.18</span><span class="n">s</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="n">check</span> <span class="k">for</span> <span class="n">valid</span> <span class="n">pod</span> <span class="n">version</span> <span class="ow">in</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">yestin</span><span class="o">/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">code_test</span><span class="o">/</span><span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">/</span><span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span><span class="o">/</span><span class="n">example</span><span class="o">/</span><span class="n">ios</span>
</span></span><span class="line"><span class="cl"><span class="n">Ignoring</span> <span class="n">ffi</span><span class="o">-</span><span class="mf">1.15</span><span class="o">.</span><span class="mi">5</span> <span class="n">because</span> <span class="n">its</span> <span class="n">extensions</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">built</span><span class="o">.</span> <span class="n">Try</span><span class="p">:</span> <span class="n">gem</span> <span class="n">pristine</span> <span class="n">ffi</span> <span class="o">--</span><span class="n">version</span> <span class="mf">1.15</span><span class="o">.</span><span class="mi">5</span>
</span></span><span class="line"><span class="cl"><span class="n">Ignoring</span> <span class="n">json</span><span class="o">-</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">2</span> <span class="n">because</span> <span class="n">its</span> <span class="n">extensions</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">built</span><span class="o">.</span> <span class="n">Try</span><span class="p">:</span> <span class="n">gem</span> <span class="n">pristine</span> <span class="n">json</span> <span class="o">--</span><span class="n">version</span> <span class="mf">2.6</span><span class="o">.</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="mf">1.11</span><span class="o">.</span><span class="mi">3</span>
</span></span><span class="line"><span class="cl"><span class="n">running</span> <span class="n">pod</span> <span class="n">install</span> <span class="ow">in</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">yestin</span><span class="o">/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">code_test</span><span class="o">/</span><span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">/</span><span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span><span class="o">/</span><span class="n">example</span><span class="o">/</span><span class="n">ios</span>
</span></span><span class="line"><span class="cl"><span class="n">Ignoring</span> <span class="n">ffi</span><span class="o">-</span><span class="mf">1.15</span><span class="o">.</span><span class="mi">5</span> <span class="n">because</span> <span class="n">its</span> <span class="n">extensions</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">built</span><span class="o">.</span> <span class="n">Try</span><span class="p">:</span> <span class="n">gem</span> <span class="n">pristine</span> <span class="n">ffi</span> <span class="o">--</span><span class="n">version</span> <span class="mf">1.15</span><span class="o">.</span><span class="mi">5</span>
</span></span><span class="line"><span class="cl"><span class="n">Ignoring</span> <span class="n">json</span><span class="o">-</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">2</span> <span class="n">because</span> <span class="n">its</span> <span class="n">extensions</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">built</span><span class="o">.</span> <span class="n">Try</span><span class="p">:</span> <span class="n">gem</span> <span class="n">pristine</span> <span class="n">json</span> <span class="o">--</span><span class="n">version</span> <span class="mf">2.6</span><span class="o">.</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="n">Auto</span><span class="o">-</span><span class="n">linking</span> <span class="n">React</span> <span class="n">Native</span> <span class="n">module</span> <span class="k">for</span> <span class="n">target</span> <span class="err">`</span><span class="n">example</span><span class="err">`</span><span class="p">:</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span>
</span></span><span class="line"><span class="cl"><span class="n">Analyzing</span> <span class="n">dependencies</span>
</span></span><span class="line"><span class="cl"><span class="n">Downloading</span> <span class="n">dependencies</span>
</span></span><span class="line"><span class="cl"><span class="n">Installing</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span> <span class="p">(</span><span class="mf">1.0</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">Generating</span> <span class="n">Pods</span> <span class="n">project</span>
</span></span><span class="line"><span class="cl"><span class="n">Integrating</span> <span class="n">client</span> <span class="n">project</span>
</span></span><span class="line"><span class="cl"><span class="n">Pod</span> <span class="n">installation</span> <span class="n">complete</span><span class="o">!</span> <span class="n">There</span> <span class="n">are</span> <span class="mi">48</span> <span class="n">dependencies</span> <span class="n">from</span> <span class="n">the</span> <span class="n">Podfile</span> <span class="ow">and</span> <span class="mi">38</span> <span class="n">total</span> <span class="n">pods</span> <span class="n">installed</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="o">!</span><span class="p">]</span> <span class="n">Your</span> <span class="n">project</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">explicitly</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">CocoaPods</span> <span class="n">master</span> <span class="n">specs</span> <span class="n">repo</span><span class="o">.</span> <span class="n">Since</span> <span class="n">CDN</span> <span class="n">is</span> <span class="n">now</span> <span class="n">used</span> <span class="n">as</span> <span class="n">the</span> <span class="n">default</span><span class="p">,</span> <span class="n">you</span> <span class="n">may</span> <span class="n">safely</span> <span class="n">remove</span> <span class="n">it</span> <span class="n">from</span> <span class="n">your</span> <span class="n">repos</span> <span class="n">directory</span> <span class="n">via</span> <span class="err">`</span><span class="n">pod</span> <span class="n">repo</span> <span class="n">remove</span> <span class="n">master</span><span class="err">`</span><span class="o">.</span> <span class="n">To</span> <span class="n">suppress</span> <span class="n">this</span> <span class="n">warning</span> <span class="n">please</span> <span class="n">add</span> <span class="err">`</span><span class="n">warn_for_unused_master_specs_repo</span> <span class="o">=&gt;</span> <span class="bp">false</span><span class="err">`</span> <span class="n">to</span> <span class="n">your</span> <span class="n">Podfile</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">📚</span>  <span class="n">Created</span> <span class="n">library</span> <span class="n">module</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span> <span class="ow">in</span> <span class="err">`</span><span class="o">./</span><span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span><span class="err">`</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="err">🕘</span>  <span class="n">It</span> <span class="n">took</span> <span class="mi">234511</span><span class="n">ms</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">====================================================</span>
</span></span><span class="line"><span class="cl"><span class="n">YOU</span><span class="s1">&#39;RE ALL SET!</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">💡</span> <span class="n">check</span> <span class="n">out</span> <span class="n">the</span> <span class="n">example</span> <span class="n">app</span> <span class="ow">in</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span><span class="o">/</span><span class="n">example</span>
</span></span><span class="line"><span class="cl"><span class="err">💡</span> <span class="n">recommended</span><span class="p">:</span> <span class="n">run</span> <span class="n">Metro</span> <span class="n">Bundler</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">new</span> <span class="n">shell</span>
</span></span><span class="line"><span class="cl"><span class="err">ℹ</span> <span class="p">(</span><span class="n">cd</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span><span class="o">/</span><span class="n">example</span> <span class="o">&amp;&amp;</span> <span class="n">yarn</span> <span class="n">start</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="err">💡</span> <span class="n">enter</span> <span class="n">the</span> <span class="n">following</span> <span class="n">commands</span> <span class="n">to</span> <span class="n">run</span> <span class="n">the</span> <span class="n">example</span> <span class="n">app</span><span class="p">:</span>
</span></span><span class="line"><span class="cl"><span class="err">ℹ</span> <span class="n">cd</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span><span class="o">/</span><span class="n">example</span>
</span></span><span class="line"><span class="cl"><span class="err">ℹ</span> <span class="n">yarn</span> <span class="n">ios</span> <span class="c1"># for React Native 0.60: npx react-native run-ios</span>
</span></span><span class="line"><span class="cl"><span class="err">ℹ</span> <span class="n">yarn</span> <span class="n">android</span> <span class="c1"># for React Native 0.60: npx react-native run-android</span>
</span></span><span class="line"><span class="cl"><span class="err">⚠</span> <span class="n">IMPORTANT</span> <span class="n">NOTICES</span>
</span></span><span class="line"><span class="cl"><span class="err">⚠</span> <span class="n">After</span> <span class="n">clean</span> <span class="n">checkout</span><span class="p">,</span> <span class="n">these</span> <span class="n">first</span> <span class="n">steps</span> <span class="n">are</span> <span class="n">needed</span><span class="p">:</span>
</span></span><span class="line"><span class="cl"><span class="err">ℹ</span> <span class="n">run</span> <span class="n">Yarn</span> <span class="ow">in</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span><span class="o">/</span><span class="n">example</span><span class="o">/</span><span class="n">ios</span>
</span></span><span class="line"><span class="cl"><span class="err">ℹ</span> <span class="p">(</span><span class="n">cd</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span><span class="o">/</span><span class="n">example</span> <span class="o">&amp;&amp;</span> <span class="n">yarn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="err">ℹ</span> <span class="k">do</span> <span class="err">`</span><span class="n">pod</span> <span class="n">install</span><span class="err">`</span> <span class="k">for</span> <span class="n">iOS</span> <span class="ow">in</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span><span class="o">/</span><span class="n">example</span><span class="o">/</span><span class="n">ios</span>
</span></span><span class="line"><span class="cl"><span class="err">ℹ</span> <span class="n">cd</span> <span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">font</span><span class="o">/</span><span class="n">example</span>
</span></span><span class="line"><span class="cl"><span class="err">ℹ</span> <span class="p">(</span><span class="n">cd</span> <span class="n">ios</span> <span class="o">&amp;&amp;</span> <span class="n">pod</span> <span class="n">install</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="err">⚠</span> <span class="n">KNOWN</span> <span class="n">ISSUE</span> <span class="n">with</span> <span class="n">adding</span> <span class="n">dependencies</span> <span class="n">to</span> <span class="n">the</span> <span class="n">library</span> <span class="n">root</span>
</span></span><span class="line"><span class="cl"><span class="err">ℹ</span> <span class="n">see</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">brodybits</span><span class="o">/</span><span class="n">create</span><span class="o">-</span><span class="n">react</span><span class="o">-</span><span class="n">native</span><span class="o">-</span><span class="n">module</span><span class="o">/</span><span class="n">issues</span><span class="o">/</span><span class="mi">308</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>目录结构</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ll -alh react-native-remote-font                                                                                                    14:29:53
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">total 40
</span></span><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">..
</span></span><span class="line"><span class="cl">.gitignore
</span></span><span class="line"><span class="cl">README.md
</span></span><span class="line"><span class="cl">android
</span></span><span class="line"><span class="cl">example
</span></span><span class="line"><span class="cl">index.js
</span></span><span class="line"><span class="cl">ios
</span></span><span class="line"><span class="cl">package.json
</span></span><span class="line"><span class="cl">react-native-remote-font.podspec
</span></span></code></pre></td></tr></table>
</div>
</div><p>android目录</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">tree react-native-remote-font/android                                                                                               11:32:42
</span></span><span class="line"><span class="cl">react-native-remote-font/android
</span></span><span class="line"><span class="cl">├── README.md
</span></span><span class="line"><span class="cl">├── build.gradle
</span></span><span class="line"><span class="cl">└── src
</span></span><span class="line"><span class="cl">    └── main
</span></span><span class="line"><span class="cl">        ├── AndroidManifest.xml
</span></span><span class="line"><span class="cl">        └── java
</span></span><span class="line"><span class="cl">            └── com
</span></span><span class="line"><span class="cl">                └── yestin
</span></span><span class="line"><span class="cl">                    └── font
</span></span><span class="line"><span class="cl">                        ├── RemoteFontLoaderModule.java
</span></span><span class="line"><span class="cl">                        └── RemoteFontLoaderPackage.java
</span></span></code></pre></td></tr></table>
</div>
</div><p>ios目录</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">tree react-native-remote-font/ios                                                                                                   11:38:56
</span></span><span class="line"><span class="cl">react-native-remote-font/ios
</span></span><span class="line"><span class="cl">├── RemoteFontLoader.h
</span></span><span class="line"><span class="cl">├── RemoteFontLoader.m
</span></span><span class="line"><span class="cl">├── RemoteFontLoader.xcodeproj
</span></span><span class="line"><span class="cl">│   └── project.pbxproj
</span></span><span class="line"><span class="cl">└── RemoteFontLoader.xcworkspace
</span></span><span class="line"><span class="cl">    └── contents.xcworkspacedata
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="运行ios较顺利">运行iOS（<strong>较顺利</strong>）</h2>
<p>如RN0.62老样子，App成功启动了，<br>
但弹窗报错<code>React Native: Unexpected token ':'. Expected a ')'</code></p>
<p>这样改<code>metro-react-native-babel-preset from 0.58.0 to 0.59.0</code></p>
<p>然后<code>yarn install &amp;&amp; npx pod-install</code> 后，<br>
重新<code>Xcode run iOS</code>就OK了</p>
<p><img
        class="lazyload"
        src="/zyestin/svg/loading.min.svg"
        data-src="/zyestin/create-npm-lib/media/17025205209135/17025377737514.jpg"
        data-srcset="/zyestin/create-npm-lib/media/17025205209135/17025377737514.jpg, /zyestin/create-npm-lib/media/17025205209135/17025377737514.jpg 1.5x, /zyestin/create-npm-lib/media/17025205209135/17025377737514.jpg 2x"
        data-sizes="auto"
        alt="/zyestin/create-npm-lib/media/17025205209135/17025377737514.jpg"
        title="/zyestin/create-npm-lib/media/17025205209135/17025377737514.jpg" width="3506" height="1502" /></p>
<h2 id="将自定义三方库代码写入有坑">将自定义三方库代码写入（<strong>有坑</strong>）</h2>
<h3 id="输入-本库代码">输入 本库代码</h3>
<p>直接在顶层目录 改三方库代码就行</p>
<blockquote>
<p>因为<code>example</code>内所使用的<code>react-native-remote-font</code>文件，是软链，指向到顶层目录的
<img
        class="lazyload"
        src="/zyestin/svg/loading.min.svg"
        data-src="/zyestin/create-npm-lib/media/17025205209135/17025382047259.jpg"
        data-srcset="/zyestin/create-npm-lib/media/17025205209135/17025382047259.jpg, /zyestin/create-npm-lib/media/17025205209135/17025382047259.jpg 1.5x, /zyestin/create-npm-lib/media/17025205209135/17025382047259.jpg 2x"
        data-sizes="auto"
        alt="/zyestin/create-npm-lib/media/17025205209135/17025382047259.jpg"
        title="/zyestin/create-npm-lib/media/17025205209135/17025382047259.jpg" width="2756" height="1888" /></p>
</blockquote>
<h3 id="添加-其它依赖库挺坑">添加 其它依赖库（<strong>挺坑</strong>）</h3>
<p>直接在<code>package.json</code>里添加如上依赖后，<code>yarn &amp;&amp; npx pod-install</code>后，Xcode run 报错如下，多次这样后，还是报错。。。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">error: Error: Unable to resolve module react-native-fs from /Users/yestin/Desktop/code_test/react-native/react-native-remote-font/index.js: react-native-fs could not be found within the project or in these directories:
</span></span><span class="line"><span class="cl">  /Users/yestin/Desktop/code_test/react-native/react-native-remote-font/example/node_modules
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">If you are sure the module exists, try these steps:
</span></span><span class="line"><span class="cl"> 1. Clear watchman watches: watchman watch-del-all
</span></span><span class="line"><span class="cl"> 2. Delete node_modules and run yarn install
</span></span><span class="line"><span class="cl"> 3. Reset Metro&#39;s cache: yarn start --reset-cache
</span></span><span class="line"><span class="cl"> 4. Remove the cache: rm -rf /tmp/metro-*
</span></span><span class="line"><span class="cl">  10 | } from &#34;react-native&#34;;
</span></span><span class="line"><span class="cl">  11 | import React, { useEffect, useMemo, useRef, useState } from &#34;react&#34;;
</span></span><span class="line"><span class="cl">&gt; 12 | import RNFS from &#34;react-native-fs&#34;;
</span></span><span class="line"><span class="cl">     |                   ^
</span></span></code></pre></td></tr></table>
</div>
</div><p>按照上面的提示，执行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">watchman watch-del-all  
</span></span><span class="line"><span class="cl">rm -rf node_modules 
</span></span><span class="line"><span class="cl">yarn &amp;&amp; npx pod-install
</span></span></code></pre></td></tr></table>
</div>
</div><p>也终于在 node_modules下 能看到了 <code>react-native-fs</code>
<img
        class="lazyload"
        src="/zyestin/svg/loading.min.svg"
        data-src="/zyestin/create-npm-lib/media/17025205209135/17025418715348.jpg"
        data-srcset="/zyestin/create-npm-lib/media/17025205209135/17025418715348.jpg, /zyestin/create-npm-lib/media/17025205209135/17025418715348.jpg 1.5x, /zyestin/create-npm-lib/media/17025205209135/17025418715348.jpg 2x"
        data-sizes="auto"
        alt="/zyestin/create-npm-lib/media/17025205209135/17025418715348.jpg"
        title="/zyestin/create-npm-lib/media/17025205209135/17025418715348.jpg" width="1484" height="536" /></p>
<p>此时，居然还没有好，报错</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">Invariant</span> <span class="n">Violation</span><span class="p">:</span> <span class="n">Native</span> <span class="n">module</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">null</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>因Xcode 并没有link到这个库的iOS代码<code>RNFS</code>，Xcode里完全搜不到</p>
<p>于是 往<code>example/ios/Podfile</code>里手动添加link</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">pod &#39;RNFS&#39;, :path =&gt; &#39;../node_modules/react-native-fs&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p>再<code>npx pod-install</code>后 就好了</p>
<blockquote>
<p>我把这个临时方案提供到了<a href="https://github.com/brodybits/create-react-native-module/issues/489#issuecomment-1855452220" target="_blank" rel="noopener noreffer ">create-react-native-module/issues/489#</a></p>
</blockquote>
<h2 id="写demo测试">写Demo测试</h2>
<p>从 <a href="https://fonts.google.com/specimen/Ma&#43;Shan&#43;Zheng" target="_blank" rel="noopener noreffer ">Google Fonts</a> 扒一些字体链接</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">const</span> <span class="n">fontInfoList</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">fontName</span><span class="p">:</span> <span class="s2">&#34;Ma Shan Zheng&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">fontUrl</span><span class="p">:</span> <span class="s2">&#34;https://fonts.gstatic.com/s/mashanzheng/v10/NaPecZTRCLxvwo41b4gvzkXaRMHsCoRTJKKTqxFXqIji1hn3wSpSEA3eSpJy0awdsFt2Zfc6SSE.119.woff2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">fontName</span><span class="p">:</span> <span class="s2">&#34;Afacad&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">fontUrl</span><span class="p">:</span> <span class="s2">&#34;https://fonts.gstatic.com/s/afacad/v1/6NUI8FKMIQOGaw6ahLYEvBjUVG5Ga92uVSQ-9kKlZfNfuw.ttf&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">fontName</span><span class="p">:</span> <span class="s2">&#34;Rubik Bubbles&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">fontUrl</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;https://fonts.gstatic.com/s/rubikbubbles/v3/JIA1UVdwbHFJtwA7Us1BPFbRNTENfDxyRXI.ttf&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">fontName</span><span class="p">:</span> <span class="s2">&#34;Preahvihear&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">fontUrl</span><span class="p">:</span> <span class="s2">&#34;https://fonts.gstatic.com/s/preahvihear/v29/6NUS8F-dNQeEYhzj7uluxswE49FJf8Wv.ttf&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>测试的核心代码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  &lt;ArtText
</span></span><span class="line"><span class="cl">    text=&#34;Hello World&#34;
</span></span><span class="line"><span class="cl">    style={{ fontSize: 20, fontVariant: [&#34;proportional-nums&#34;] }}
</span></span><span class="line"><span class="cl">    fontInfo={fontInfoList[fontInfoIndex]}
</span></span><span class="line"><span class="cl">  /&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>同样，将安卓代码放进去</p>
<h2 id="运行-android挺坑">运行 Android（<strong>挺坑</strong>）</h2>
<p>yarn android报错</p>
<h3 id="1-failed-to-transform-react-native-0710-rc0-debugaar">(1) <code>Failed to transform react-native-0.71.0-rc.0-debug.aar</code></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">* What went wrong:
</span></span><span class="line"><span class="cl">Execution failed for task &#39;:react-native-remote-font:javaPreCompileDebug&#39;.
</span></span><span class="line"><span class="cl">&gt; Could not resolve all files for configuration &#39;:react-native-remote-font:debugCompileClasspath&#39;.
</span></span><span class="line"><span class="cl">   &gt; Failed to transform react-native-0.71.0-rc.0-debug.aar (com.facebook.react:react-native:0.71.0-rc.0) to match attributes {artifactType=android-classes, com.android.build.api.attributes.BuildTypeAttr=debug, org.gradle.category=library, org.gradle.dependency.bundling=external, org.gradle.libraryelements=aar, org.gradle.status=release, org.gradle.usage=java-api}.
</span></span><span class="line"><span class="cl">      &gt; Execution failed for JetifyTransform: /Users/yestin/.gradle/caches/modules-2/files-2.1/com.facebook.react/react-native/0.71.0-rc.0/7a7f5a0af6ebd8eb94f7e5f7495e9d9684b4f543/react-native-0.71.0-rc.0-debug.aar.
</span></span><span class="line"><span class="cl">         &gt; Java heap space
</span></span></code></pre></td></tr></table>
</div>
</div><p>查到是RN的原因了，照着这个回答 <a href="https://github.com/facebook/react-native/issues/35210#issuecomment-1304536693" target="_blank" rel="noopener noreffer ">react-native/issues/35210#issuecomment-1304536693</a></p>
<p>在<code>react-native-remote-font/example/android/build.gradle</code>添加如下代码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">def REACT_NATIVE_VERSION = new File([&#39;node&#39;, &#39;--print&#39;,&#34;JSON.parse(require(&#39;fs&#39;).readFileSync(require.resolve(&#39;react-native/package.json&#39;), &#39;utf-8&#39;)).version&#34;].execute(null, rootDir).text.trim())
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">allprojects {
</span></span><span class="line"><span class="cl">    configurations.all {
</span></span><span class="line"><span class="cl">        resolutionStrategy {
</span></span><span class="line"><span class="cl">            // Remove this override in 0.66, as a proper fix is included in react-native itself.
</span></span><span class="line"><span class="cl">            force &#34;com.facebook.react:react-native:&#34; + REACT_NATIVE_VERSION
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">    }
</span></span></code></pre></td></tr></table>
</div>
</div><p>再次 <code>yarn android</code> App成功安装启动，但依然报错</p>
<h3 id="2-也遇到-link问题">(2) 也遇到 Link问题</h3>
<ul>
<li>build error 找不到符号<code>RNFSPackage</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/Users/yestin/Desktop/code_test/react-native/react-native-remote-font/example/android/app/src/main/java/com/example/MainApplication.java:31: 错误: 找不到符号
</span></span><span class="line"><span class="cl">            packages.add(new RNFSPackage());
</span></span><span class="line"><span class="cl">                             ^
</span></span><span class="line"><span class="cl">  符号: 类 RNFSPackage
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">* What went wrong:
</span></span><span class="line"><span class="cl">Execution failed for task &#39;:app:compileDebugJavaWithJavac&#39;.
</span></span><span class="line"><span class="cl">&gt; Compilation failed; see the compiler error output for details.
</span></span></code></pre></td></tr></table>
</div>
</div><p>在<code>build.gradle</code>的<code>dependencies {...}</code>内添加</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">    implementation project(&#39;:react-native-fs&#39;)
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>build error <code>':react-native-fs' could not be found in project ':app'</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">FAILURE: Build failed with an exception.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">* Where:
</span></span><span class="line"><span class="cl">Build file &#39;/Users/yestin/Desktop/code_test/react-native/react-native-remote-font/example/android/app/build.gradle&#39; line: 197
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">* What went wrong:
</span></span><span class="line"><span class="cl">A problem occurred evaluating project &#39;:app&#39;.
</span></span><span class="line"><span class="cl">&gt; Project with path &#39;:react-native-fs&#39; could not be found in project &#39;:app&#39;.
</span></span></code></pre></td></tr></table>
</div>
</div><p>在<code>settings.gradle</code> 添加 path</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">include &#39;:react-native-fs&#39;
</span></span><span class="line"><span class="cl">project(&#39;:react-native-fs&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-fs/android&#39;)
</span></span></code></pre></td></tr></table>
</div>
</div><p>运行成功了，但弹窗报错</p>
<ul>
<li>build error <code>TypeError: null ... RNFSManager</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">TypeError: null is not an object (evaluating &#39;RNFSManager.RNFSFileTypeRegular&#39;)
</span></span></code></pre></td></tr></table>
</div>
</div><p>发现搜不到<code>RNFSManager</code>被引用的地方</p>
<p>于是在<code>MainApplication.java</code>中<code>getPackages(){...}</code>内添加</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">// react-native-fs
</span></span><span class="line"><span class="cl">import com.rnfs.RNFSPackage;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">packages.add(new RNFSPackage());
</span></span></code></pre></td></tr></table>
</div>
</div><p>至此，终于 不报错了。。。</p>
<h2 id="发布">发布</h2>
<ul>
<li>确认本地是否成功登陆npm认证成功</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">npm whoami
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">zyestin
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>若未登录，则执行<code>npm adduser</code></p>
</blockquote>
<ul>
<li>执行<code>npm publish</code></li>
</ul>
<p>报错，是因为我刚删除了同名库，想重发一个，却失败了。<br>
而npm规则是 24小时才能发布刚删除的同名的包</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">18 http fetch PUT 403 https://registry.npmjs.org/react-native-remote-font 1544ms
</span></span><span class="line"><span class="cl">19 verbose stack Error: 403 Forbidden - PUT https://registry.npmjs.org/react-native-remote-font - react-native-remote-font cannot be republished until 24 hours have passed.
</span></span></code></pre></td></tr></table>
</div>
</div></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2023-12-15&nbsp;<a class="git-hash" href="https://github.com/dillonzq/LoveIt/commit/8c20d470b89bdc622f18ae4e6d8e13435c8b22fe" target="_blank" title="commit by zhaoyang(zhaoyang@ihuaben.com) 8c20d470b89bdc622f18ae4e6d8e13435c8b22fe: 《用脚手架 制作一个RN库 放npm》">
                                    <i class="fas fa-hashtag fa-fw" aria-hidden="true"></i>8c20d47</a></span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/zyestin/create-npm-lib/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://zyestin.github.io/zyestin/create-npm-lib/" data-title="用脚手架 制作一个RN库 放npm" data-via="YestinZz" data-hashtags="react-native"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://zyestin.github.io/zyestin/create-npm-lib/" data-hashtag="react-native"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://zyestin.github.io/zyestin/create-npm-lib/" data-title="用脚手架 制作一个RN库 放npm"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://zyestin.github.io/zyestin/create-npm-lib/" data-title="用脚手架 制作一个RN库 放npm"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://zyestin.github.io/zyestin/create-npm-lib/" data-title="用脚手架 制作一个RN库 放npm"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/zyestin/tags/react-native/">react-native</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/zyestin/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/zyestin/art-text/" class="prev" rel="prev" title="远程字体的动态加载&amp;应用"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>远程字体的动态加载&应用</a>
            <a href="/zyestin/waterfall-list-horizontal/" class="next" rel="next" title="横向 瀑布流列表">横向 瀑布流列表<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="giscus" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://giscus.app">Giscus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.122.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://github.com/zyestin" target="_blank">zyestin</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{"giscus":{"category":"Announcements","categoryId":"DIC_kwDOKJ2IzM4Celi_","darkTheme":"dark","emitMetadata":"0","inputPosition":"bottom","lang":"en","lazyLoading":false,"lightTheme":"light","mapping":"pathname","reactionsEnabled":"1","repo":"zyestin/zyestin","repoId":"R_kgDOKJ2IzA"}},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.en","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"}};</script><script type="text/javascript" src="/zyestin/js/theme.min.js"></script></body>
</html>
